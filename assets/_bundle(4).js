NWS.initNamespace('NWS.Modules.Accessibility.BaseOverrides',function(){var _params;return{init:function(params){_params=params;NWS.Modules.Accessibility.BaseOverrides.AddFileAlert();NWS.Modules.Accessibility.BaseOverrides.ExternalLinks();if($('details').length){NWS.Modules.Accessibility.BaseOverrides.AccordionFAQPolyfill()}if($('.TitanBlock:not(.TopFilter) fieldset div.head span.accessible').length){$('.TitanBlock fieldset div.head span.accessible').on('keypress',function(e){var keyCode=e.which;if(keyCode==13){var e=$(this);e.click()}})}var ajaxBlocks=[NWS.Block.Aggregation,NWS.Block.DataList,NWS.Block.SegmentedSearch].filter(function(blockNS){return typeof blockNS!=="undefined"});ajaxBlocks.forEach(function(blockNS){blockNS.OnAjaxComplete("AddFileAlert",NWS.Modules.Accessibility.BaseOverrides.AddFileAlert);blockNS.OnAjaxComplete("ExternalLinks",NWS.Modules.Accessibility.BaseOverrides.ExternalLinks)});if(NWS.Block.Aggregation){var baseFilterBlocks_ClassificationMinMax=NWS.Block.Aggregation.ClassificationMinMax;NWS.Block.Aggregation.ClassificationMinMax=function(blockID,classID){baseFilterBlocks_ClassificationMinMax(blockID,classID);NWS.Modules.Accessibility.BaseOverrides.AddAriaExpanded(blockID,classID)}}if(NWS.Block.FilterBlock){var baseFilterBlocks_ClassificationMinMax=NWS.Block.FilterBlock.ClassificationsMinMax;NWS.Block.FilterBlock.ClassificationsMinMax=function(blockID,classID){baseFilterBlocks_ClassificationMinMax(blockID,classID);NWS.Modules.Accessibility.BaseOverrides.AddAriaExpanded(blockID,classID)}}if(NWS.Block.DataEditor){var baseDataEditorSubmitForm=NWS.Block.DataEditor.FinalFormSubmit;NWS.Block.DataEditor.FinalFormSubmit=function(docID,blockID,doConfirm,submitAction){baseDataEditorSubmitForm(docID,blockID,doConfirm,submitAction);NWS.Modules.Accessibility.BaseOverrides.ImproveErrorMessaging()}}if(NWS.FormSupport){var baseSFSubmitFormUDFButton=NWS.FormSupport.SFSubmitFormUDFButton;NWS.FormSupport.SFSubmitFormUDFButton=function(ctl){baseSFSubmitFormUDFButton(ctl);NWS.Modules.Accessibility.BaseOverrides.ImproveErrorMessaging()};var baseSFSubmitForm=NWS.FormSupport.SFSubmitForm;NWS.FormSupport.SFSubmitForm=function(docID,blockID,doConfirm,useCaptcha,submitAction){baseSFSubmitForm(docID,blockID,doConfirm,useCaptcha,submitAction);NWS.Modules.Accessibility.BaseOverrides.ImproveErrorMessaging()}}},ImproveErrorMessaging:function(){$(".ErrorMessage").focus()},AccordionFAQOpenAll:function(blockID,event){event.preventDefault();$("#Accordion_"+blockID).addClass('open');$("#Accordion_"+blockID).find('details').attr('open','open')},AccordionFAQCloseAll:function(blockID,event){event.preventDefault();$("#Accordion_"+blockID).removeClass('open');$("#Accordion_"+blockID).find('details').removeAttr('open')},AccordionFAQPolyfill:function(){if(!('open'in document.createElement('details'))){$('details').each(function(){var details=$(this);var summary=$(this).find('summary');details.addClass('polyfill');summary.on('click',function(){var attr=details.attr('open');if(typeof attr!==typeof undefined&&attr!==false){details.removeAttr('open')}else{details.attr('open','open')}});summary.attr('tabindex','0').on('keypress',function(e){var keyCode=e.which;if(event.keyCode!=13&&event.keyCode!=32)return;event.preventDefault();var attr=details.attr('open');if(typeof attr!==typeof undefined&&attr!==false){details.removeAttr('open')}else{details.attr('open','open')}})})}},AddAriaExpanded:function(blockID,classID){var $this=$("fieldset[id^=F"+blockID+"]");if($this.closest('.TitanBlock').hasClass('TopFilter'))return;if($this.hasClass('min')){$this.find('.head > span').attr('aria-expanded','false')}else{$this.find('.head > span').attr('aria-expanded','true')}},AddAttribute:function(element,attributeToAdd,value){let attribute=element.attr(attributeToAdd);if(typeof attribute==typeof undefined||attribute==false)element.attr(attributeToAdd,value)},AddFileAlert:function(resultsDiv){var attributesToAdd=[{selector:"a[href*='.pdf']",name:"title",value:"Opens a PDF Document"},{selector:"a[href*='.doc']",name:"title",value:"Opens a Word Document"},{selector:"a[href*='.xls']",name:"title",value:"Opens a Excel Document"},{selector:".teaserImage img[src*='pdf_']",name:"alt",value:"File Icon - PDF"},{selector:".teaserImage img[src*='doc_']",name:"alt",value:"File Icon - Word"},{selector:".teaserImage img[src*='xls_']",name:"alt",value:"File Icon - Excel"},{selector:".teaserImage img[src*='jpg_']",name:"alt",value:"File Icon - JPG"}];attributesToAdd.forEach(function(toAdd){$(toAdd.selector,resultsDiv).each(function(){NWS.Modules.Accessibility.BaseOverrides.AddAttribute($(this),toAdd.name,toAdd.value)})})},ExternalLinks:function(resultsDiv){if(typeof(_params.externalLinkMessage)==='undefined')_params.externalLinkMessage='Leaves this website';if(typeof(_params.newWindowMessage)==='undefined')_params.newWindowMessage='Opens in a new window';var linkSelector=_params.externalLink||'a:not([data-fancybox])',links=$(linkSelector,resultsDiv).filter(function(){return this.hostname&&this.hostname!==location.hostname});links.each(function(){NWS.Modules.Accessibility.BaseOverrides.AddAttribute($(this),"title",$(this).attr('target')==="_blank"?_params.newWindowMessage:_params.externalLinkMessage)})}}});NWS.initNamespace('NWS.Modules.Accessibility.Tabs',function(event){var _params;return{setFocusAria:function(event,selected,setScope){setScope.closest(_params.tabsWrapper).find('[role="tab"]').attr({tabindex:'-1','aria-selected':null}).closest('li').removeClass('selected');selected.attr({tabindex:'0','aria-selected':true}).closest('li').addClass('selected')},showPanel:function($toShow,setScope){setScope.closest(_params.tabsWrapper).find('[role="tabpanel"]').attr('aria-hidden','true').removeClass('selected');$toShow.attr('aria-hidden',null).addClass('selected')},onKeydown:function(event){if(event.keyCode!=37&&event.keyCode!=39)return;if(event.keyCode==37){if($(event.target).closest('li').prev('li').length){var $target=$(event.target).closest('li').prev('li').find('[role="tab"]')}}else{if($(event.target).closest('li').next('li').length){var $target=$(event.target).closest('li').next('li').find('[role="tab"]')}}var attr=$target.attr('data-tab-content');if(typeof attr!==typeof undefined&&attr!==false){var $tabID=$('#'+$target.attr('data-tab-content'))}else{var $tabID=$('#'+$target.attr('href').substring(1))}$target.focus();NWS.Modules.Accessibility.Tabs.setFocusAria(event,$target,$(event.target));NWS.Modules.Accessibility.Tabs.showPanel($tabID,$(event.target))},onClick:function(event){event.preventDefault();NWS.Modules.Accessibility.Tabs.setFocusAria(event,$(event.target),$(event.target));var attr=$(event.target).attr('data-tab-content');if(typeof attr!==typeof undefined&&attr!==false){var $tabID=$('#'+$(event.target).attr('data-tab-content'))}else{var $tabID=$('#'+$(event.target).attr('href').substring(1))}NWS.Modules.Accessibility.Tabs.showPanel($tabID,$(event.target));_params.callback(event)},init:function(params){_params=params;if(typeof(_params.tabsWrapper)==='undefined')_params.tabsWrapper='.tabbedContent'}}});NWS.initNamespace('NWS.Modules.Accessibility.TopNav',function(){var _params;function toggleAriaExpanded(i,attr){return attr=='true'?'false':'true'}function toggleSubMenu(e){if($(e).closest('li').hasClass('hasMegaMenu')&&$('#navOpener').prop('checked')==false){$(e).closest('li').toggleClass('open')}else{$(e).next('ul').toggle()}$(e).attr('aria-expanded',toggleAriaExpanded)}function closeSubMenus(){_params.element.siblings('ul').css('display','');$('a.toggleMenuButton').attr('aria-expanded','false')}function closeMobileMenu(){if($('#navOpener:checked').length)$('#Hamburger').click()}return{init:function(params){_params=params;if(typeof(_params.element)==='undefined')_params.element='#navArea .menu > li > a.hasChild';if(typeof(_params.navArea)==='undefined')_params.navArea='#navArea';if(!(_params.element instanceof jQuery))_params.element=$(_params.element);if(!(_params.navArea instanceof jQuery))_params.navArea=$(_params.navArea);_params.element.after("<a tabindex='0' class='toggleMenuButton' role='button' aria-expanded='false' aria-haspopup='true'><span class='screenReaderOnly'>show submenu</span></a>");_params.element.each(function(){var menuTitle=$(this).text();$(this).next('.toggleMenuButton').find('span.screenReaderOnly').append(' for '+menuTitle+'')});$('a.toggleMenuButton').on('keypress',function(e){var keyCode=e.which;if(keyCode==13){var e=$(this);toggleSubMenu(e)}});$('a.toggleMenuButton').on('click',function(e){var e=$(this);toggleSubMenu(e)});_params.element.siblings('ul').children('li:last-child').find('a').on('keydown',function(e){var keyCode=e.which;if(keyCode==9){closeSubMenus()}});_params.element.siblings('ul').children('li:first-child').find('a').on('keydown',function(e){var keyCode=e.which;if(event.shiftKey&&event.keyCode==9){closeSubMenus()}});$(document).keyup(function(e){if(e.keyCode===9){if(!_params.navArea.is(e.target)&&_params.navArea.has(e.target).length===0){closeMobileMenu()}}});$(document).keyup(function(e){if(e.keyCode===27){closeSubMenus();closeMobileMenu()}})}}})